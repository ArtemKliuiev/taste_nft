import{U as A,_ as N}from"./UsersSlider-DXw7z5If.js";import{C as g,g as R,r as c,y as S,w as y,c as f,h as u,a as v,F as x,d as T,q as I,b as B,k as C,o as d,e as V,n as $,i as E}from"./index-BOyvYYyG.js";import{n as F,a as P}from"./NftCard-IEdWT6Ne.js";const D={class:"search"},M={class:"container"},O={class:"search__main"},U={class:"search__dropdowns"},K={class:"search__cards"},L={key:0,class:"search__cards-empty"},Q={class:"search__btn"},j={class:"search__users"},W={__name:"SearchPage",setup(z){const a=g(),i=R(),l=c("Recently added"),m=c([]),o=c("All"),_=c("disabled"),r=c([]),n=c(4);let h=0;S(()=>{const e=i.currentRoute.value.query.query;e&&(a.search=e),p(a.search)}),y(a,()=>{a.search===""?setTimeout(()=>{p(a.search)},300):p(a.search),a.search===""&&i.back()});function k(e){i.replace({query:{sort:l.value,filter:o.value,query:e}})}y(l,()=>{l.value==="Recently added"?r.value.sort((e,t)=>e.sortInfo.recentlyAdded-t.sortInfo.recentlyAdded):l.value==="Popular"?r.value.sort((e,t)=>e.sortInfo.popular-t.sortInfo.popular):l.value==="The best"&&r.value.sort((e,t)=>e.sortInfo.best-t.sortInfo.best),i.replace({query:{sort:l.value,filter:o.value,query:a.search}})}),y(o,()=>{let e=[];const t=m.value;o.value==="All"?e=t:o.value==="Auctions"?e=t.filter(s=>s.type==="auction"):o.value==="On sale"&&(e=t.filter(s=>s.type==="default")),r.value=e,n.value=4,i.replace({query:{sort:l.value,filter:o.value,query:a.search}})});function w(){n.value=n.value+4,b()}function b(){r.value.length<=n.value?_.value="disabled":_.value="active"}function p(e){k(e);const t=new RegExp(e===""?"(?=.*.)^$":e,"i");r.value=F.filter(s=>t.test(s.description.title)),m.value=r.value,b(),n.value=4}return(e,t)=>(d(),f("div",D,[u("div",M,[u("div",O,[u("div",U,[v(A,{type:"sort",list:["Recently added","Popular","The best"],onSubmit:t[0]||(t[0]=s=>l.value=s)}),v(A,{type:"filter",list:["All","Auctions","On sale"],onSubmit:t[1]||(t[1]=s=>o.value=s)})]),u("div",K,[(d(!0),f(x,null,T(r.value,(s,q)=>(d(),f("div",{key:q,class:"search__one-card"},[n.value>q?(d(),V(P,{nftInfo:s,key:$(h)?h.value++:h++},null,8,["nftInfo"])):I("",!0)]))),128)),r.value.length===0?(d(),f("span",L,"There are no NFTs")):I("",!0)]),u("div",Q,[v(C,{onClick:w,state:_.value},{default:B(()=>[E("Show all")]),_:1},8,["state"])]),u("div",j,[v(N)])])])]))}};export{W as default};

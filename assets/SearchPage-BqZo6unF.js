import{U as I,_ as g}from"./UsersSlider-Cv02-PqA.js";import{B as R,g as S,r as o,y as q,w as y,c as d,h as n,a as f,F as x,d as B,q as k,b as T,k as V,o as u,e as $,n as C,i as E}from"./index-CDpX-i8h.js";import{n as F,a as P}from"./NftCard-Lu_cV47h.js";const D={class:"search"},M={class:"container"},O={class:"search__main"},U={class:"search__dropdowns"},K={class:"search__cards"},L={key:0,class:"search__cards-empty"},Q={class:"search__btn"},j={class:"search__users"},W={__name:"SearchPage",setup(z){const r=R(),_=S(),l=o("Recently added"),m=o([]),c=o("All"),v=o("disabled"),a=o([]),i=o(4);let h=0;q(()=>{const e=_.currentRoute.value.query.query;e&&(r.search=e),p(r.search)}),y(r,()=>{r.search===""?setTimeout(()=>{p(r.search)},300):p(r.search),r.search===""&&_.back()});function w(e){_.replace({query:{query:e}})}y(l,()=>{l.value==="Recently added"?a.value.sort((e,s)=>e.sortInfo.recentlyAdded-s.sortInfo.recentlyAdded):l.value==="Popular"?a.value.sort((e,s)=>e.sortInfo.popular-s.sortInfo.popular):l.value==="The best"&&a.value.sort((e,s)=>e.sortInfo.best-s.sortInfo.best)}),y(c,()=>{let e=[];const s=m.value;c.value==="All"?e=s:c.value==="Auctions"?e=s.filter(t=>t.type==="auction"):c.value==="On sale"&&(e=s.filter(t=>t.type==="default")),a.value=e});function N(){i.value=i.value+4,b()}function b(){a.value.length<=i.value?v.value="disabled":v.value="active"}function p(e){w(e);const s=new RegExp(e===""?"(?=.*.)^$":e,"i");a.value=F.filter(t=>s.test(t.description.title)),m.value=a.value,b()}return(e,s)=>(u(),d("div",D,[n("div",M,[n("div",O,[n("div",U,[f(I,{list:["Recently added","Popular","The best"],onSubmit:s[0]||(s[0]=t=>l.value=t)}),f(I,{list:["All","Auctions","On sale"],onSubmit:s[1]||(s[1]=t=>c.value=t)})]),n("div",K,[(u(!0),d(x,null,B(a.value,(t,A)=>(u(),d("div",{key:A,class:"search__one-card"},[i.value>A?(u(),$(P,{nftInfo:t,key:C(h)?h.value++:h++},null,8,["nftInfo"])):k("",!0)]))),128)),a.value.length===0?(u(),d("span",L,"There are no NFTs")):k("",!0)]),n("div",Q,[f(V,{onClick:N,state:v.value},{default:T(()=>[E("Show all")]),_:1},8,["state"])]),n("div",j,[f(g)])])])]))}};export{W as default};
